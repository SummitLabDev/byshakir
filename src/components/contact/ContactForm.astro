---
const projectTypes = [
  { value: '', label: 'Select project type' },
  { value: 'private-residence', label: 'Private Residence' },
  { value: 'commercial', label: 'Commercial Project' },
  { value: 'custom-furniture', label: 'Custom Furniture Inquiry' },
  { value: 'general', label: 'General Inquiry' },
  { value: 'other', label: 'Other' },
];
---

<form
  action="https://api.web3forms.com/submit"
  method="POST"
  class="space-y-6"
  id="contact-form"
>
  <!-- Web3Forms Access Key -->
  <input type="hidden" name="access_key" value="e2776013-0b94-4e89-b2da-96fbbc1ea604" />
  <input type="hidden" name="subject" value="New Inquiry from By Shakir Website" />
  <input type="hidden" name="from_name" value="By Shakir Website" />

  <!-- Honeypot Spam Protection -->
  <input type="checkbox" name="botcheck" class="hidden" style="display: none;" />

  <!-- Name -->
  <div>
    <label for="name" class="block text-sm font-medium text-cream/90 mb-2">
      Name <span class="text-gold">*</span>
    </label>
    <input
      type="text"
      id="name"
      name="name"
      required
      class="w-full px-4 py-3 bg-charcoal border border-gold/20 text-cream placeholder-taupe focus:outline-none focus:border-gold transition-colors"
      placeholder="Your full name"
    />
  </div>

  <!-- Email -->
  <div>
    <label for="email" class="block text-sm font-medium text-cream/90 mb-2">
      Email <span class="text-gold">*</span>
    </label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="w-full px-4 py-3 bg-charcoal border border-gold/20 text-cream placeholder-taupe focus:outline-none focus:border-gold transition-colors"
      placeholder="your@email.com"
    />
  </div>

  <!-- Phone -->
  <div>
    <label for="phone" class="block text-sm font-medium text-cream/90 mb-2">
      Phone
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="w-full px-4 py-3 bg-charcoal border border-gold/20 text-cream placeholder-taupe focus:outline-none focus:border-gold transition-colors"
      placeholder="+31 6 12345678"
    />
  </div>

  <!-- Project Type -->
  <div>
    <label for="project_type" class="block text-sm font-medium text-cream/90 mb-2">
      Project Type <span class="text-gold">*</span>
    </label>
    <select
      id="project_type"
      name="project_type"
      required
      class="w-full px-4 py-3 bg-charcoal border border-gold/20 text-cream focus:outline-none focus:border-gold transition-colors appearance-none cursor-pointer"
    >
      {projectTypes.map((type) => (
        <option value={type.value} class="bg-charcoal">
          {type.label}
        </option>
      ))}
    </select>
  </div>

  <!-- Message -->
  <div>
    <label for="message" class="block text-sm font-medium text-cream/90 mb-2">
      Message <span class="text-gold">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      required
      rows="5"
      class="w-full px-4 py-3 bg-charcoal border border-gold/20 text-cream placeholder-taupe focus:outline-none focus:border-gold transition-colors resize-none"
      placeholder="Tell us about your project..."
    ></textarea>
  </div>

  <!-- Submit Button -->
  <div>
    <button
      type="submit"
      class="w-full px-7 py-4 bg-gold text-black font-sans tracking-wider uppercase transition-all duration-300 hover:bg-gold-light focus:outline-none focus:ring-2 focus:ring-gold/50 focus:ring-offset-2 focus:ring-offset-black"
    >
      Send Message
    </button>
  </div>
</form>

<!-- Success Message -->
<div id="success-message" class="hidden text-center py-12">
  <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-gold/20 flex items-center justify-center">
    <svg class="w-8 h-8 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
    </svg>
  </div>
  <h3 class="font-serif text-heading-3 text-cream mb-2">Thank You!</h3>
  <p class="text-cream/70">Your message has been sent successfully. We'll get back to you soon.</p>
</div>

<!-- Error Message -->
<div id="error-message" class="hidden text-center py-8 px-6 bg-red-900/20 border border-red-500/20">
  <h3 class="font-serif text-heading-3 text-cream mb-2">Oops!</h3>
  <p class="text-cream/70" id="error-text">Something went wrong. Please try again.</p>
</div>

<script>
  const form = document.getElementById('contact-form');
  const successMessage = document.getElementById('success-message');
  const errorMessage = document.getElementById('error-message');
  const errorText = document.getElementById('error-text');
  const submitButton = form?.querySelector('button[type="submit"]');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Disable submit button during submission
    if (submitButton) {
      submitButton.disabled = true;
      submitButton.textContent = 'Sending...';
    }

    // Get form data
    const formData = new FormData(form);

    try {
      // Submit to Web3Forms API
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formData
      });

      const data = await response.json();

      if (data.success) {
        // Show success message and hide form
        form.classList.add('hidden');
        successMessage?.classList.remove('hidden');
        errorMessage?.classList.add('hidden');
      } else {
        // Show error message
        errorMessage?.classList.remove('hidden');
        if (errorText) {
          errorText.textContent = data.message || 'Something went wrong. Please try again.';
        }
      }
    } catch (error) {
      // Show error message on network failure
      errorMessage?.classList.remove('hidden');
      if (errorText) {
        errorText.textContent = 'Network error. Please check your connection and try again.';
      }
    } finally {
      // Re-enable submit button
      if (submitButton) {
        submitButton.disabled = false;
        submitButton.textContent = 'Send Message';
      }
    }
  });
</script>

<style>
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23C9A962' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
</style>
